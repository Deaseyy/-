# 0-1背包

### 特点

每个物品只有一件，不能重复取

### 例题

题目：现有四个物品，有各自的价值和代价，有背包容量为8，怎么装的价值最多的物品？

如：

物品编号：1  2  3  4

物品重量：2  3  4  5

物品价值：3  4  5  8

注意：背包容量c即是能装下重量为c的物品

**最后一件：**最后一件物品a<font size='1'>k</font>（a<font size='1'>k</font>: 第k件物品）

**原问题：** 背包容量为 8 时，在四个物品中，装得最大价值的物品

**子问题：** 背包容量为 8-c<font size='1'>k</font> 时，在 4-a<font size='1'>k</font> 件物品中，装得最大价值的物品

**设置状态：** `f(k,c)` 为当背包容量为 `c` 时，拿前 `k` 件物品，所能得到的最大价值。

对于f(4,8)，先要判断当前容量8，能否装下第4件(最后一件)物品，

- 若能装下，有两种选择：
  - 拿第四件物品，剩前`3`件物品可拿，容量剩下`8-5=3`，价值为`f(3, 3)`+第四件物品价值，即 `f(3,3) + 8`
  - 不拿第四件物品，剩前`3`件物品可拿，容量剩余8，价值为 `f(3, 8)`

- 不能装下，则不拿第四件物品

**转移方程：** 

if c<font size="1">k</font> > c (太重，装不下)  ：

​	f(k, c) = f(k-1, c),     

else:

​	f(k, c) = max{f(k-1, c), f(k-1, c-c<font size="1">k</font>) + v<font size="1">k</font>}

- 装不下：不拿，价值=拿前k-1件物品的最大价值
- 装得下：拿或不拿，取最大价值

**初始值：**

当 k=0 时，没有物品可以拿，价值为0

当 c=0 时，背包容量为0，不能装任何东西，价值为0

即：` f(0,1) = f(1,0) = 0`



# 完全背包

### 特点

每个物品可以重复取

### 对比0-1背包

![image-20201226181756981](C:\Users\12395\AppData\Roaming\Typora\typora-user-images\image-20201226181756981.png)

从上可以看出，转移方程区别在于： 第 `i` 个物品选择拿时，对于前一次取物品，0-1背包只能在 前 `i-1`个物品中取，即不能重复取同一件物品；而完全背包能在前 `i` 件物品中取，即每次可以取重复物品



### dp数组压缩到一维

![image-20201226183857494](C:\Users\12395\AppData\Roaming\Typora\typora-user-images\image-20201226183857494.png)

可见，dp数组压缩到一维后，两种问题转移方程一样，但递推顺序相反了



# 一维数组写法总结

1.如果是0-1背包，即数组中的元素不可重复使用，nums放在外循环，target在内循环，且内循环倒序；

```text
for num in nums:
    for i in range(target, num-1, -1):
```

2.如果是完全背包，即数组中的元素可重复使用，nums放在外循环，target在内循环。且内循环正序。

```text
for num in nums:
    for i in range(num, target+1):
```

3.如果组合问题需考虑元素之间的顺序，需将target放在外循环，将nums放在内循环。

```text
for i in range(1, target+1):
    for num in nums:
```



# 相关例题

- 416 分割等和子集（medium）
- 494 目标和（medium）
- 474 一和零（medium）
- 322 零钱兑换（medium）
- 518 零钱兑换 II（medium）
- 139 单词拆分（medium）
- 377 组合总和 Ⅳ（medium）